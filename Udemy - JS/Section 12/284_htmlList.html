<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Page Title</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet">
  <style>
    body{
      text-align: center;
      font-family: 'Open Sans', sans-serif;
    }
    .item{
      border: 1px solid gray;
      padding: 2%;
      float: left;
      width: 27%;
      height: 250px;
      margin: 1%;
    }
    .img-fluid{
      max-width: 100%;
    }
    .productItem{
      border: 1px solid gray;
      text-decoration: none;
      background: green;
      color: azure;
      border-radius: 10px;
      padding: 5px;
      font-size: 0.6em;
      display: inline-block;
    }
  </style>
</head>
<body>

  <div id="output">Complete JavaScript Course</div>
  <div id="output2"></div>

  <script>
    var items = [
      {
        name:'iPhone',
        details:'White',
        cost:500
      },
      {
        name:'iPad',
        details:'Black',
        cost:800
      },
      {
        name:'Cable',
        details:'3 foot',
        cost:50
      },
      {
        name:'Camera',
        details:'25MP',
        cost:300
      },
      {
        name:'Laptop',
        details:'Intel i7',
        cost:2000
      },
      {
        name:'LCD Monitor',
        details:'24 inch',
        cost:200
      },
      {
        name:'TV',
        details:'50 inch',
        cost:4500
      }];

      var html = '<br>';
      var shopcart = [];
      window.onload = init;

      function init(){
        buildItems();
        var q = document.querySelectorAll('.productItem');
        for(var x=0; x<q.length; x++){
          q[x].addEventListener('click', function(e){
            e.preventDefault();
            addtocard();
          })
        }
      }

      function addtocard(){
        var iteminfo = event.target.dataset;
        iteminfo.qty = 1;
        shopcart.push(iteminfo);
        sessionStorage.setItem('scart', JSON.stringify(shopcart));
        outputCard();
      }

      function outputCard(){
        if(sessionStorage.getItem('scart') != null){
          shopcart = JSON.parse(sessionStorage.getItem('scart'));
        }
        var html = '<table>';
        var total = 0;
        shopcart.forEach(function(v){
          var stotal = v.qty * v.price;
          total += stotal;
          html += '<tr><td>'+v.name+'</td><td>'+stotal+'</td></tr>';
        })
        html += '</table>';
        document.getElementById('output').innerHTML = html;
      }

      function buildItems(){
        var x = 0;
        items.forEach(function(v){
          html += '<div class="item">'+
            '<h3>'+ v.name +'</h3>'+
            '<img src="http://placehold.it/350x150" class="img-fluid">'+
              '<div>'+
                v.details + '<br>' +
                '<a href="#"class="productItem"'+
                  'data-name="'+ v.name +'" '+ 
                  'data-s="'+ v.details +'" '+
                  'data-price="'+ v.cost +'" '+
                  'data-s="'+ v.details +'" '+
                  'data-id="'+ x +'"' +
                  '> Add to Cart </a></div></div>';
          x++;
          // console.log(v);
        })
        document.getElementById('output2').innerHTML += html;
      }
  </script>
</body>
</html>
